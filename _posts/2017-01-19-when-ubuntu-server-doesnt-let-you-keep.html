---
layout: post
title: When Ubuntu Server doesn't let you keep the internet device drivers
date: '2017-01-19T16:51:00.001-05:00'
author: umhau
tags:
- Linux
- Ubuntu Server 16.04.1 LTS
- tasksel
- internet drivers
modified_time: '2017-01-19T17:00:20.478-05:00'
blogger_id: tag:blogger.com,1999:blog-2584289275272726799.post-8285970065330555159
blogger_orig_url: http://nixingaround.blogspot.com/2017/01/when-ubuntu-server-doesnt-let-you-keep.html
---

So I ran into a problem while setting up Ubuntu Server 16.04.1 LTS for my cluster: one of my computers had restricted hardware drivers for the wifi and ethernet devices, and while the drivers were available on the install media, they weren't transferred over. &nbsp;Something about non-free stuff. &nbsp;So after installation, I was stuck with a computer that had no access to the web. <br /><br />After a ton of searching, I a) found what the hardware problem was, and b) realized that I can use the install media as the installation source - that might sound obvious, but the keyword there is <i>"can",</i>&nbsp;not <i>"should be able to"</i>.&nbsp;It's badly documented and very not-obvious. <br /><br />Anyway, here's the <a href="https://help.ubuntu.com/12.04/serverguide/installing-from-cd.html#install-tasks" target="_blank">source</a>&nbsp;for using the install media. &nbsp;Part of the install process is choosing which sets of packages you want to include - things like OpenSSH Server stuff or Mail Server stuff. &nbsp;There's also one called Manual Package Selection. &nbsp;It didn't seem to do anything during the install (though I did walk away, and it might have timed out), but you can reenter the tool after the installation is finished and you've rebooted into the new OS. <br /><br />After rebooting, log in and plug the ubuntu server install media into the computer. &nbsp;Run:<br /><pre style="background-color: #eff0f1; border: 0px; color: #333333; font-size: 14px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;">sudo tasksel install manual</pre>This command will find the install media, and 'install' the manual package selection 'package'. &nbsp;In other cases, it would actually install stuff - in this case, it just gives you a shell prompt. &nbsp;At this prompt, you somehow have full internet access - I don't know how it happened. &nbsp;It was automagical. &nbsp;In my case, the next step was editing the sources list to enable the universe repository (already seemed enabled - automagic of the tasksel command?). &nbsp;<a href="https://unixblogger.com/2016/08/11/how-to-get-your-realtek-rtl8111rtl8168-working-updated-guide/" target="_blank">Source</a> on the actual internet driver fix.<br /><pre style="background-color: #eff0f1; border: 0px; color: #333333; font-size: 14px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;">sudo nano /etc/apt/sources.list</pre>And a line that looks like this<br /><pre style="background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;"><span style="color: #333333;"><span style="font-size: 14px;">deb http://us.archive.ubuntu.com/ubuntu/ xenial main restricted</span></span><span style="color: #333333; font-size: 14px;"><br /></span></pre><div style="text-align: justify;">Should be changed to look like this:</div><div><pre style="background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;"><span style="color: #333333;"><span style="font-size: 14px;">deb http://us.archive.ubuntu.com/ubuntu/ xenial main restricted universe</span></span><span style="color: #333333; font-size: 14px;"><br /></span></pre></div><div style="text-align: justify;">[ctrl]-x to leave. &nbsp;Then, run&nbsp;</div><div style="text-align: justify;"><pre style="background-color: #eff0f1; border: 0px; color: #333333; font-size: 14px; margin-bottom: 1em; overflow: auto; padding: 5px; width: auto; word-wrap: normal;">sudo apt-get install r8168-dkms</pre></div><div style="text-align: justify;">And the driver is installed. &nbsp;Reboot and the internet should work.</div><br />