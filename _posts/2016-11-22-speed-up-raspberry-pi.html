---
layout: post
title: Speed up the Raspberry Pi
date: '2016-11-22T00:19:00.001-05:00'
author: umhau
tags:
- audio
- optimization
- Raspberry Pi
categories: memos
modified_time: '2016-11-22T22:16:35.565-05:00'
blogger_id: tag:blogger.com,1999:blog-2584289275272726799.post-876654725956375150
blogger_orig_url: http://nixingaround.blogspot.com/2016/11/speed-up-raspberry-pi.html
---

Normally I'd just bookmark this, but the link has already died once and I had to dig it up from alternate development trees. &nbsp;Current source:&nbsp;<a href="https://github.com/autostatic/scripts/blob/rpi/jackstart">https://github.com/autostatic/scripts/blob/rpi/jackstart</a>. &nbsp;And <a href="http://wiki.linuxaudio.org/wiki/raspberrypi" target="_blank">this</a> is the rather fascinating page that lead me to all this.<br /><br />(note: I'm not sure this is compatible with the latest Linux kernel, and it's not been tested. YMMV.)<br /><br /><pre style="background-color: #eff0f1; border: 0px; color: #333333; font-size: 14px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;">#!/bin/bash<br /><br />## Stop the ntp service<br />sudo service ntp stop<br /><br />## Stop the triggerhappy service<br />sudo service triggerhappy stop<br /><br />## Stop the dbus service. Warning: this can cause unpredictable behaviour when running a desktop environment on the RPi<br />sudo service dbus stop<br /><br />## Stop the console-kit-daemon service. Warning: this can cause unpredictable behaviour when running a desktop environment on the RPi<br />sudo killall console-kit-daemon<br /><br />## Stop the polkitd service. Warning: this can cause unpredictable behaviour when running a desktop environment on the RPi<br />sudo killall polkitd<br /><br />## Only needed when Jack2 is compiled with D-Bus support (Jack2 in the AutoStatic RPi audio repo is compiled without D-Bus support)<br />#export DBUS_SESSION_BUS_ADDRESS=unix:path=/run/dbus/system_bus_socket<br /><br />## Remount /dev/shm to prevent memory allocation errors<br />sudo mount -o remount,size=128M /dev/shm<br /><br />## Kill the usespace gnome virtual filesystem daemon. Warning: this can cause unpredictable behaviour when running a desktop environment on the RPi<br />killall gvfsd<br /><br />## Kill the userspace D-Bus daemon. Warning: this can cause unpredictable behaviour when running a desktop environment on the RPi<br />killall dbus-daemon<br /><br />## Kill the userspace dbus-launch daemon. Warning: this can cause unpredictable behaviour when running a desktop environment on the RPi<br />killall dbus-launch<br /><br />## Uncomment if you'd like to disable the network adapter completely<br />#echo -n “1-1.1:1.0” | sudo tee /sys/bus/usb/drivers/smsc95xx/unbind<br />## In case the above line doesn't work try the following<br />#echo -n “1-1.1” | sudo tee /sys/bus/usb/drivers/usb/unbind<br /><br />## Set the CPU scaling governor to performance<br />echo -n performance | sudo tee /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor<br /><br />## And finally start JACK<br />jackd -P70 -p16 -t2000 -d alsa -dhw:UA25 -p 128 -n 3 -r 44100 -s &amp;<br /><br />exit</pre>If you don't mind killing the networking, you can add these to the script as well:<br /><br /><pre style="background-color: #eff0f1; border: 0px; color: #333333; font-size: 14px; margin-bottom: 1em; max-height: 600px; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;">sudo service ifplugd stop<br />sudo killall ifplugd<br />sudo service networking stop</pre><br /><br /><br />