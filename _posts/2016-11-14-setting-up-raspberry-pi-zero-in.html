---
layout: post
title: Setting up Raspberry Pi Zero in Headless Mode
date: '2016-11-14T18:42:00.000-05:00'
author: umhau
tags:
- ssh
- Linux
- Linux Mint 18
- scp
- Raspberry Pi
categories: walkthroughs
modified_time: '2016-11-23T15:52:04.772-05:00'
blogger_id: tag:blogger.com,1999:blog-2584289275272726799.post-7088618863166412064
blogger_orig_url: http://nixingaround.blogspot.com/2016/11/setting-up-raspberry-pi-zero-in.html
---

Download the raspbian image, dd it to the sd card, unmount and remount it on the computer. <br /><br />Figure out the &nbsp;name of your micro sd card (I'm going to assume that it's sdb) - look for the device with a total size similar to what yours is labeled as.<br /><pre style="background-color: #eff0f1; border: 0px; color: #333333; font-size: 14px; margin-bottom: 1em; max-height: 600px; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;">lsblk</pre>Download the image <a href="https://www.raspberrypi.org/downloads/raspbian/" target="_blank">here</a>. &nbsp;Normally I'd give you a wget command, but it's a lot faster doing it on the browser. &nbsp;Grab the "Raspbian Jessie with Pixel" version...I don't trust the Lite to have everything needed for future projects. <br /><br />Extract the file (right-click and select either 'extract' or 'open with archive manager') and put it in the Downloads folder. &nbsp;If you rename it to raspbian.img after extracting, then you can cut and paste the following command. Note that you should change 'foo' to the device name you identified above, e.g., of=/dev/sdb. &nbsp;I'm keeping it as of=/dev/foo to prevent accidents.<br /><pre style="background-color: #eff0f1; border: 0px; color: #333333; font-size: 14px; margin-bottom: 1em; max-height: 600px; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;">sudo dd bs=4M if=/home/$USER/Downloads/raspbian.img of=/dev/foo status=progress</pre>Remove the sd card from the computer and plug it back in. &nbsp;That seems to allow the low-level processes to reassess the contents of the card after everything on it was changed.<br /><br />Resize the partition in gparted if you're planning on doing anything that involves a significant amount of storage. &nbsp;The Raspbian image doesn't leave a lot of free space, and your card probably has extra room on it. &nbsp;Install gparted below, then run and resize (that's a GUI operation, so no walkthrough - sorry. &nbsp;Also, I've been doing from nearly the beginning of my Linux career and don't need any reminders on how to do it).<br /><pre style="background-color: #eff0f1; border: 0px; color: #333333; font-size: 14px; margin-bottom: 1em; max-height: 600px; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;">sudo apt-get install gparted</pre>Set up the networking - you'll need to tell the pi what the wifi password is (<a href="https://davidmaitland.me/2015/12/raspberry-pi-zero-headless-setup/" target="_blank">Source</a>). &nbsp;cd into the primary partition of the sd card - you'll find it as the folder named with a long string of meaningless text if you do:<br /><pre style="background-color: #eff0f1; border: 0px; color: #333333; font-size: 14px; margin-bottom: 1em; max-height: 600px; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;">ls /media/$USER</pre>cd into that folder (represented by me here with x's and dashes) and then go several folders deeper to edit the wifi config file. &nbsp;The whole thing is done below.<br /><pre style="background-color: #eff0f1; border: 0px; color: #333333; font-size: 14px; margin-bottom: 1em; max-height: 600px; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;">sudo nano /media/$USER/xxxx-xxxx-xxxxx/etc/wpa_supplicant/wpa_supplicant.conf</pre>Add this to the end of the file, where "foo" is the name of your wifi network (literally, what shows up when you're choosing a network to connect to - it <i>is </i>case-sensitive) and "bar" is the wifi password. Both should be in quotation marks.<br /><pre style="background-color: #eff0f1; border: 0px; color: #333333; font-size: 14px; margin-bottom: 1em; max-height: 600px; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;">network={<br />  ssid="foo"<br />  psk="bar"<br />  proto=RSN<br />  key_mgmt=WPA-PSK<br />  pairwise=CCMP<br />  auth_alg=OPEN<br />}</pre>Save and exit by pressing CTRL-O, ENTER and CTRL-X.<br /><br />Unmount, stick the ssd in the pi, connect a wifi adapter and plug in the power. &nbsp;Most of the time you don't even need to know the IP of the pi, as you can use the computer name to ssh in:<br /><pre style="background-color: #eff0f1; border: 0px; color: #333333; font-size: 14px; margin-bottom: 1em; max-height: 600px; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;">ssh pi@raspberrypi</pre>Note the password is<br /><pre style="background-color: #eff0f1; border: 0px; color: #333333; font-size: 14px; margin-bottom: 1em; max-height: 600px; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;">raspberry</pre><h4>A few extra commands to be aware of:</h4>Note that to ssh into a Mint 18 distro from the pi, you need to install&nbsp;openssh-server on Mint first. <br /><pre style="background-color: #eff0f1; border: 0px; color: #333333; font-size: 14px; margin-bottom: 1em; max-height: 600px; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;">sudo apt-get install openssh-server</pre>If you know the user and computer names that you want to ssh into, you can use them instead of hard-to-keep-track-of IP addresses. &nbsp;If everything is on the local network (LAN).<br /><br />Copy files with scp:<br /><pre style="background-color: #eff0f1; border: 0px; color: #333333; font-size: 14px; margin-bottom: 1em; max-height: 600px; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;">scp user@computer:desired.file ~/path/to/containing/folder</pre>And on an *ahem* completely unrelated note, found a few more dependencies that sphinxtrain needed in the install script. &nbsp;I'll update vmc when I get a chance.<br /><br />