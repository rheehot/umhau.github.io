---
layout: post
title: Setting up OpenBSD (updated for 6.0)
date: '2016-11-09T11:19:00.000-05:00'
author: umhau
tags:
- ethernet
- OpenBSD
- OpenBSD 5.9
- package installation
- unix
modified_time: '2017-01-17T10:43:55.947-05:00'
blogger_id: tag:blogger.com,1999:blog-2584289275272726799.post-6781491108430502185
blogger_orig_url: http://nixingaround.blogspot.com/2016/07/setting-up-openbsd.html
---

<div dir="ltr" style="text-align: left;" trbidi="on">A few notes on how I set up my OpenBSD installation. &nbsp;This will be an ongoing compilation.<br /><h3 style="text-align: left;">Installation</h3><div>Had to do this with a USB connected CD drive. &nbsp;Followed the instructions for a flash drive, but the installation itself didn't want to play ball. &nbsp;I forget the exact scenario; it was confusing.<br /><h3>Wireless</h3></div><div>I'm on an Acer Aspire One from a long time ago - I believe it's a D250 model. &nbsp;It uses the athn0 wifi driver. &nbsp;Set it up by putting this into your /etc/hostname.ath0 file (copy the whole thing into the command prompt and run it):</div><div><pre style="background-color: #eff0f1; border: 0px; margin-bottom: 1em; max-height: 600px; overflow: auto; padding: 5px; width: auto; word-wrap: normal;">echo "<br />nwid 'foo'<br />wpakey 'bar'<br />dhcp <br />" &gt; /etc/hostname.ath0</pre></div><div>Replace the text as required with your own information...specifically, the stuff that says foo and bar. &nbsp;:) &nbsp;After that's added, run:</div><div><pre style="background-color: #eff0f1; border: 0px; margin-bottom: 1em; max-height: 600px; overflow: auto; padding: 5px; width: auto; word-wrap: normal;">sh /etc/netstart</pre></div><div>...because it won't start automatically. &nbsp;Don't know why. &nbsp;I used <a href="http://mailing.openbsd.misc.narkive.com/BZkrjAg3/frequently-wifi-athn-device-timeout#post8" target="_blank">this link</a> to figure out how to get it running.</div><h3 style="text-align: left;">Ethernet</h3>If you have ethernet access, internet is somewhat simpler. &nbsp;Find out what the ethernet device name is:<br /><pre style="background-color: #eff0f1; border: 0px; margin-bottom: 1em; max-height: 600px; overflow: auto; padding: 5px; width: auto; word-wrap: normal;">ifconfig</pre>Mine is fxp0. &nbsp;Using DHCP makes things easy. &nbsp;All this command does is put&nbsp;<span style="background-color: #eff0f1;">dhcp</span>&nbsp;in the device's config file. <br /><pre style="background-color: #eff0f1; border: 0px; margin-bottom: 1em; max-height: 600px; overflow: auto; padding: 5px; width: auto; word-wrap: normal;">echo dhcp &gt; /etc/hostname.fxp0</pre>Reboot, and you should be online. &nbsp;Any problems, visit <a href="http://www.openbsd.org/faq/faq6.html#Setup" target="_blank">http://www.openbsd.org/faq/faq6.html#Setup</a><br />and <a href="http://www.openbsd.org/faq/faq6.html#DHCP" target="_blank">http://www.openbsd.org/faq/faq6.html#DHCP</a>.<br /><h3 style="text-align: left;">Package Installation</h3><div>See&nbsp;<a href="http://www.openbsd.org/faq/faq15.html#Intro" target="_blank">http://www.openbsd.org/faq/faq15.html#Intro</a> for an excellent explanation of how all this works.</div><h4 style="text-align: left;">Setting up the Package Mirror</h4>Being able to install packages is always nice. &nbsp;On OpenBSD, you have to <a href="http://www.openbsd.org/ftp.html" target="_blank">specify the mirror you want</a> to search from and download from manually. &nbsp;You can set this variable after startup every time, or put it in your .profile. &nbsp;I used <a href="http://mirrors.mit.edu/pub/OpenBSD/5.9/packages/i386/" target="_blank">the MIT mirror</a>; it's not going anywhere anytime soon. [edit: ok, it did go. &nbsp;They didn't keep the 5.9 mirror once 6.0 came out; <a href="http://mirrors.mit.edu/pub/OpenBSD/6.0/packages/i386/" target="_blank">here's</a> the link to the 6.0 packages.]<br /><pre style="background-color: #eff0f1; border: 0px; margin-bottom: 1em; max-height: 600px; overflow: auto; padding: 5px; width: auto; word-wrap: normal;">vi ./.profile</pre>Now add (I stuck it in the middle of the file):<br /><pre style="background-color: #eff0f1; border: 0px; margin-bottom: 1em; max-height: 600px; overflow: auto; padding: 5px; width: auto; word-wrap: normal;">export PKG_PATH=http://mirrors.mit.edu/pub/OpenBSD/$(uname -r)/packages/$(uname -m)/</pre>Except that in my case this didn't work. &nbsp;OpenBSD read that as<br /><pre style="background-color: #eff0f1; border: 0px; margin-bottom: 1em; max-height: 600px; overflow: auto; padding: 5px; width: auto; word-wrap: normal;">mirrors.mit.edu/pub/OpenBSD/OpenBSD/packages/i386/</pre>which doesn't make sense. &nbsp;Instead, I had to do<br /><pre style="background-color: #eff0f1; border: 0px; margin-bottom: 1em; max-height: 600px; overflow: auto; padding: 5px; width: auto; word-wrap: normal;">export PKG_PATH=http://mirrors.mit.edu/pub/OpenBSD/6.0/packages/$(uname -m)/</pre><strike>which destroys flexibility when I upgrade to 6.0 (whenever that comes out).</strike> Changed for compatibility with 6.0.<br /><h4 style="text-align: left;">Installing a Package</h4>Now I can do<br /><pre style="background-color: #eff0f1; border: 0px; margin-bottom: 1em; max-height: 600px; overflow: auto; padding: 5px; width: auto; word-wrap: normal;">pkg_add python-2.7.11</pre>to install python 2.7 - but to get that full package name, I have to do CTRL-F in the mirror webpage and figure out what's available. &nbsp;I'm pretty sure there's a way to search that on the command line, but I haven't figured it out yet. &nbsp;If only the package name, and not the exact version number, is known, then just use that. &nbsp;The following successfully installs nano.<br /><pre style="background-color: #eff0f1; border: 0px; margin-bottom: 1em; max-height: 600px; overflow: auto; padding: 5px; width: auto; word-wrap: normal;">pkg_add nano</pre><h3 style="text-align: left;">Turning the Computer Off</h3><h4>Restarting</h4><div>Restarting is simple:&nbsp;</div><div><pre style="background-color: #eff0f1; border: 0px; margin-bottom: 1em; max-height: 600px; overflow: auto; padding: 5px; width: auto; word-wrap: normal;">reboot<br /></pre></div><h4>Shutting Down</h4><div>You'd think this would be simple, eh? &nbsp;Linux works with a straightforward</div><div><pre style="background-color: #eff0f1; border: 0px; margin-bottom: 1em; max-height: 600px; overflow: auto; padding: 5px; width: auto; word-wrap: normal;">shutdown now</pre></div><div>but that eventually brings you right back to the shell on my computer's OpenBSD installation. &nbsp;I have to use&nbsp;</div><div><pre style="background-color: #eff0f1; border: 0px; margin-bottom: 1em; max-height: 600px; overflow: auto; padding: 5px; width: auto; word-wrap: normal;">halt</pre></div><div>Though, and I haven't tried this yet, something like</div><div><pre style="background-color: #eff0f1; border: 0px; margin-bottom: 1em; max-height: 600px; overflow: auto; padding: 5px; width: auto; word-wrap: normal;">shutdown -h now</pre></div><div>is also supposed to work. &nbsp;<a href="http://mailman.theapt.org/pipermail/openbsd-newbies/2005-October/002777.html" target="_blank">This thread</a> has more details.<br /><br /></div></div>