<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?">


    <link rel="stylesheet" type="text/css" href="/assets/css/styles.css">
    <meta name="viewport" content="width=device-width">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="/js/infinite-jekyll.js"></script>

  </head>
  <body>
    <box class="wrapper">
      <header>
        <a href="http://localhost:4000"> <h1>*nixing around</h1> </a>
        <p>A programmer's journal of complicated projects.</p>
        <p class="view"><a href="">github</a> | <a href="http://localhost:4000/about">about</a> | <a href="http://localhost:4000/explore">explore</a></p>

        <p>testing</p>

      </header>
      <section>

      <div class="post">

    <header class="post-header">
        
    <h1 class="post-title">Installing GNU APL</h1>
    <p 
        class="post-meta">May 12, 2017 • <a  href="/2017/05/12/installing-gnu-apl/">permalink</a>
        <i>  • Linux • dyalog • Ubuntu GNOME 17.04 • package installation • APL</i> 
    </p>
    </header>

    <article class="post-content">
    <p>Three parts: the program itself, the keyboard layout and the font.  This is on Ubuntu GNOME 17.04.</p>

<h2 id="gnu-apl">GNU APL</h2>

<div class="highlighter-rouge"><pre class="codehilite"><code>cd ~/Downloads
wget ftp://ftp.gnu.org/gnu/apl/apl-1.7.tar.gz
tar xzf apl-1.7.tar.gz
cd apl-1.7
./configure
make 
sudo make install
</code></pre></div>

<h2 id="set-up-the-keyboard">Set up the keyboard</h2>

<p>This is to provide access to the varied and very weird set of characters APL uses. Ubuntu GNOME, as of 17.04, doesn’t like to play with APL any more.  So this flies under the radar a bit.</p>

<p>Prevent Gnome Shell from reverting changes:</p>

<div class="highlighter-rouge"><pre class="codehilite"><code>gsettings set org.gnome.desktop.input-sources sources '[]'
</code></pre></div>

<p>Clear any prior settings:</p>

<div class="highlighter-rouge"><pre class="codehilite"><code>setxkbmap -option ""
</code></pre></div>

<p>And enable the new keyboard layout:</p>

<div class="highlighter-rouge"><pre class="codehilite"><code>setxkbmap us,apl -option "grp:switch"
</code></pre></div>

<p>Now the APL keyboard characters can be accessed while pressing down the Right Alt key.  You can view the APL keyboard layout (if you’re using Ubuntu GNOME 17.04) with this command:</p>

<div class="highlighter-rouge"><pre class="codehilite"><code>gkbd-keyboard-display -l apl
</code></pre></div>

<p>I wrapped all of this into a couple of scripts. One of them runs at startup (since setxkbmap isn’t persistent across reboots), and the other displays the keyboard layout and is tied to a custom shortcut. The scripts are <a href="https://github.com/umhau/scripts/blob/master/installation/keyboard_layout.sh">here</a> and <a href="https://github.com/umhau/scripts/blob/master/apl_keyboard_hint.sh">here</a>.  Those link to the github where I stash most of my scripts.  If you look inside the initial_config.sh script, you’ll see I’ve found a command to automatically set the script to run at startup.  For the other, I’d suggest the keyboard shotcut combination [win + .].</p>

<h2 id="apl385-unicode">APL385 Unicode</h2>

<p>Set a good fixed-width font so the symbols show up correctly.  Go here: https://www.dyalog.com/apl-font-keyboard.htm, download the recommended font, open and install it.  Then use the GNOME Tweak Tool to set the font as the default in the terminal:</p>

<div class="highlighter-rouge"><pre class="codehilite"><code>fonts -&gt; monospace -&gt; APL385 Unicode Regular -&gt; Select
</code></pre></div>

<p>And you’re done.</p>

<h2 id="sources">Sources</h2>

<ul>
  <li>https://stackoverflow.com/questions/27951582/apl-keymapping-on-linux-gnu-apl</li>
  <li>https://unix.stackexchange.com/a/45499</li>
  <li>https://unix.stackexchange.com/a/317057</li>
</ul>

    </article>

    <p class="extra-space"></p>
    <hr>
    <p class="extra-space"></p>

</div>





      </section>
      <footer>
        <p><small>Hosted on GitHub &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a> and <a href="https://github.com/umhau">umhau</a></small></p>
      </footer>
    </box>
    <script src="/assets/js/scale.fix.js"></script>


  



  </body>
</html>
