<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?">

<!-- Begin Jekyll SEO tag v2.3.0 -->
<title>NFS server on OpenBSD | nixing around</title>
<meta property="og:title" content="NFS server on OpenBSD" />
<meta name="author" content="umhau" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="I still use OpenBSD for my server, so here goes setting up an NFS on it.  This is a fantastic resource.Note: if having trouble with the vi text editor, I listed a few simple commands elsewhere on the blog.  For now, a few quick reminders:&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;i –&gt; enters Insert mode (where you can enter text)[ESC] –&gt; enters command mode:w –&gt; saves the file (have to be in command mode):q –&gt; exits the file (have to be in command mode)&lt;/pre&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;/div&gt;Let’s call the shared folder ‘storage’.  We’ll put it in the home directory of the user ‘admin’.  We have to create the user, and the folder. &lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;useradd -b /home/faculty/ -s /bin/bash -m adminpasswd admin&lt;/pre&gt;Let’s use the password&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;Password!&lt;/pre&gt;since this is a local machine, and I’m assuming that the folks on the LAN are friendly.Next, make sure the new user owns their home directory.&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;chown -R admin: admin&lt;/pre&gt;And then create the shared directory inside /home/admin,&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;mkdir /home/admin/storage&lt;/pre&gt;and make sure that everyone can read/write to that spot.&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;chmod -R 777 /home/admin/storage&lt;/pre&gt;I think nfs can be activated by adding the following to rc.conf.local. (src; might not be updated, and I can’t see more than the first bit)&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;vi /etc/rc.conf.local&lt;/pre&gt;add to the end of the file:&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;portmap=YESnfs_server=YES&lt;/pre&gt;OR, I can run these two commands.  There’s this thing about multiple server instances, so that I can handle concurrent requests, that I can control with the following commands…I just don’t know if the services will be enabled after a reboot.&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;rcctl enable portmap mountd nfsdrcctl set nfsd flags -tun 4&lt;/pre&gt;Once the services are started, the /etc/exports file needs an entry.  This is how the machine knows to share the folder - and who to share it to.&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;vi /etc/exports&lt;/pre&gt;add to the bottom (this gives everyone accessing the folder root access),&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;/home/admin/storage -alldirs -mapall=root&lt;/pre&gt;Now the nfs service can be started&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;rcctl start portmap mountd nfsd&lt;/pre&gt;and in case you edited the /etc/exports file while the NFS was running, restart the service.&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;rcctl reload mountd&lt;/pre&gt;&lt;h4&gt;Mount&lt;/h4&gt;&lt;div&gt;to mount the new network folder, you have to create your own location for the folder to present itself, and then set the folder to automount.&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;Also, don’t forget to install the nfs software.  It came default on OpenBSD, but not so much on Linux Mint.&lt;/div&gt;&lt;div&gt;&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;sudo apt-get install nfs-server -y&lt;/pre&gt;&lt;/div&gt;&lt;div&gt;create /storage in the root directory&lt;/div&gt;&lt;div&gt;&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;sudo mkdir /storage&lt;/pre&gt;&lt;/div&gt;&lt;div&gt;give everyone all permissions&lt;/div&gt;&lt;div&gt;&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;chmod 777 /storage&lt;/pre&gt;&lt;/div&gt;&lt;div&gt;edit the fstab to automount the folder - we’ll assume the hostname of the OpenBSD server is ‘server1’&lt;/div&gt;&lt;div&gt;&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;sudo nano /etc/fstab&lt;/pre&gt;&lt;/div&gt;&lt;div&gt;and add this to the bottom of the file&lt;/div&gt;&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;server1:/home/admin/storage /storage nfs &lt;/pre&gt;and remount everything&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;sudo mount -a&lt;/pre&gt;that’s it!  You should have full access to the network folder." />
<meta property="og:description" content="I still use OpenBSD for my server, so here goes setting up an NFS on it.  This is a fantastic resource.Note: if having trouble with the vi text editor, I listed a few simple commands elsewhere on the blog.  For now, a few quick reminders:&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;i –&gt; enters Insert mode (where you can enter text)[ESC] –&gt; enters command mode:w –&gt; saves the file (have to be in command mode):q –&gt; exits the file (have to be in command mode)&lt;/pre&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;/div&gt;Let’s call the shared folder ‘storage’.  We’ll put it in the home directory of the user ‘admin’.  We have to create the user, and the folder. &lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;useradd -b /home/faculty/ -s /bin/bash -m adminpasswd admin&lt;/pre&gt;Let’s use the password&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;Password!&lt;/pre&gt;since this is a local machine, and I’m assuming that the folks on the LAN are friendly.Next, make sure the new user owns their home directory.&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;chown -R admin: admin&lt;/pre&gt;And then create the shared directory inside /home/admin,&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;mkdir /home/admin/storage&lt;/pre&gt;and make sure that everyone can read/write to that spot.&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;chmod -R 777 /home/admin/storage&lt;/pre&gt;I think nfs can be activated by adding the following to rc.conf.local. (src; might not be updated, and I can’t see more than the first bit)&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;vi /etc/rc.conf.local&lt;/pre&gt;add to the end of the file:&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;portmap=YESnfs_server=YES&lt;/pre&gt;OR, I can run these two commands.  There’s this thing about multiple server instances, so that I can handle concurrent requests, that I can control with the following commands…I just don’t know if the services will be enabled after a reboot.&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;rcctl enable portmap mountd nfsdrcctl set nfsd flags -tun 4&lt;/pre&gt;Once the services are started, the /etc/exports file needs an entry.  This is how the machine knows to share the folder - and who to share it to.&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;vi /etc/exports&lt;/pre&gt;add to the bottom (this gives everyone accessing the folder root access),&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;/home/admin/storage -alldirs -mapall=root&lt;/pre&gt;Now the nfs service can be started&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;rcctl start portmap mountd nfsd&lt;/pre&gt;and in case you edited the /etc/exports file while the NFS was running, restart the service.&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;rcctl reload mountd&lt;/pre&gt;&lt;h4&gt;Mount&lt;/h4&gt;&lt;div&gt;to mount the new network folder, you have to create your own location for the folder to present itself, and then set the folder to automount.&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;Also, don’t forget to install the nfs software.  It came default on OpenBSD, but not so much on Linux Mint.&lt;/div&gt;&lt;div&gt;&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;sudo apt-get install nfs-server -y&lt;/pre&gt;&lt;/div&gt;&lt;div&gt;create /storage in the root directory&lt;/div&gt;&lt;div&gt;&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;sudo mkdir /storage&lt;/pre&gt;&lt;/div&gt;&lt;div&gt;give everyone all permissions&lt;/div&gt;&lt;div&gt;&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;chmod 777 /storage&lt;/pre&gt;&lt;/div&gt;&lt;div&gt;edit the fstab to automount the folder - we’ll assume the hostname of the OpenBSD server is ‘server1’&lt;/div&gt;&lt;div&gt;&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;sudo nano /etc/fstab&lt;/pre&gt;&lt;/div&gt;&lt;div&gt;and add this to the bottom of the file&lt;/div&gt;&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;server1:/home/admin/storage /storage nfs &lt;/pre&gt;and remount everything&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;sudo mount -a&lt;/pre&gt;that’s it!  You should have full access to the network folder." />
<link rel="canonical" href="http://localhost:4000/2017/02/01/nfs-server-on-openbsd/" />
<meta property="og:url" content="http://localhost:4000/2017/02/01/nfs-server-on-openbsd/" />
<meta property="og:site_name" content="nixing around" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-02-01T14:21:00-05:00" />
<script type="application/ld+json">
{"name":null,"description":"I still use OpenBSD for my server, so here goes setting up an NFS on it.  This is a fantastic resource.Note: if having trouble with the vi text editor, I listed a few simple commands elsewhere on the blog.  For now, a few quick reminders:&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;i –&gt; enters Insert mode (where you can enter text)[ESC] –&gt; enters command mode:w –&gt; saves the file (have to be in command mode):q –&gt; exits the file (have to be in command mode)&lt;/pre&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;/div&gt;Let’s call the shared folder ‘storage’.  We’ll put it in the home directory of the user ‘admin’.  We have to create the user, and the folder. &lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;useradd -b /home/faculty/ -s /bin/bash -m adminpasswd admin&lt;/pre&gt;Let’s use the password&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;Password!&lt;/pre&gt;since this is a local machine, and I’m assuming that the folks on the LAN are friendly.Next, make sure the new user owns their home directory.&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;chown -R admin: admin&lt;/pre&gt;And then create the shared directory inside /home/admin,&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;mkdir /home/admin/storage&lt;/pre&gt;and make sure that everyone can read/write to that spot.&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;chmod -R 777 /home/admin/storage&lt;/pre&gt;I think nfs can be activated by adding the following to rc.conf.local. (src; might not be updated, and I can’t see more than the first bit)&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;vi /etc/rc.conf.local&lt;/pre&gt;add to the end of the file:&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;portmap=YESnfs_server=YES&lt;/pre&gt;OR, I can run these two commands.  There’s this thing about multiple server instances, so that I can handle concurrent requests, that I can control with the following commands…I just don’t know if the services will be enabled after a reboot.&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;rcctl enable portmap mountd nfsdrcctl set nfsd flags -tun 4&lt;/pre&gt;Once the services are started, the /etc/exports file needs an entry.  This is how the machine knows to share the folder - and who to share it to.&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;vi /etc/exports&lt;/pre&gt;add to the bottom (this gives everyone accessing the folder root access),&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;/home/admin/storage -alldirs -mapall=root&lt;/pre&gt;Now the nfs service can be started&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;rcctl start portmap mountd nfsd&lt;/pre&gt;and in case you edited the /etc/exports file while the NFS was running, restart the service.&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;rcctl reload mountd&lt;/pre&gt;&lt;h4&gt;Mount&lt;/h4&gt;&lt;div&gt;to mount the new network folder, you have to create your own location for the folder to present itself, and then set the folder to automount.&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;Also, don’t forget to install the nfs software.  It came default on OpenBSD, but not so much on Linux Mint.&lt;/div&gt;&lt;div&gt;&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;sudo apt-get install nfs-server -y&lt;/pre&gt;&lt;/div&gt;&lt;div&gt;create /storage in the root directory&lt;/div&gt;&lt;div&gt;&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;sudo mkdir /storage&lt;/pre&gt;&lt;/div&gt;&lt;div&gt;give everyone all permissions&lt;/div&gt;&lt;div&gt;&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;chmod 777 /storage&lt;/pre&gt;&lt;/div&gt;&lt;div&gt;edit the fstab to automount the folder - we’ll assume the hostname of the OpenBSD server is ‘server1’&lt;/div&gt;&lt;div&gt;&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;sudo nano /etc/fstab&lt;/pre&gt;&lt;/div&gt;&lt;div&gt;and add this to the bottom of the file&lt;/div&gt;&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;server1:/home/admin/storage /storage nfs &lt;/pre&gt;and remount everything&lt;pre style=&quot;background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;&quot;&gt;sudo mount -a&lt;/pre&gt;that’s it!  You should have full access to the network folder.","author":{"@type":"Person","name":"umhau"},"@type":"BlogPosting","url":"http://localhost:4000/2017/02/01/nfs-server-on-openbsd/","publisher":null,"image":null,"headline":"NFS server on OpenBSD","dateModified":"2017-02-01T14:21:00-05:00","datePublished":"2017-02-01T14:21:00-05:00","sameAs":null,"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2017/02/01/nfs-server-on-openbsd/"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" type="text/css" href="/assets/css/styles.css">
    <meta name="viewport" content="width=device-width">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="/js/infinite-jekyll.js"></script>

  </head>
  <body>
    <box class="wrapper">
      <header>
        <a href="http://localhost:4000"> <h1>*nixing around</h1> </a>
        <p>A programmer's journal of complicated projects.</p>
        <p class="view"><a href="">github</a> | <a href="http://localhost:4000/about">about</a> | <a href="http://localhost:4000/explore">explore</a></p>

        <p>testing</p>

      </header>
      <section>

      <div class="post">

    <header class="post-header">
        
    <h1 class="post-title">NFS server on OpenBSD</h1>
    <p 
        class="post-meta">Feb 1, 2017 • <a  href="/2017/02/01/nfs-server-on-openbsd/">permalink</a>
        <i>  • NFS • OpenBSD • LAN</i> 
    </p>
    </header>

    <article class="post-content">
    I still use OpenBSD for my server, so here goes setting up an NFS on it. &nbsp;<a href="https://www.openbsd.org/faq/faq6.html#NFS" target="_blank">This</a> is a fantastic resource.<br /><br />Note: if having trouble with the vi text editor, I listed a few simple commands elsewhere on the blog. &nbsp;For now, a few quick reminders:<br /><pre style="background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;"><span style="color: #333333;"><span style="font-size: 14px;">i        --&gt;       enters Insert mode (where you can enter text)<br />[ESC]    --&gt;       enters command mode<br />:w       --&gt;       saves the file (have to be in command mode)<br />:q       --&gt;       exits the file (have to be in command mode)</span></span><span style="color: #333333; font-size: 14px;"><br /></span></pre><div style="text-align: justify;"><br /></div>Let's call the shared folder 'storage'. &nbsp;We'll put it in the home directory of the user 'admin'. &nbsp;We have to create the user, and the folder. <br /><pre style="background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;"><span style="color: #333333;"><span style="font-size: 14px;">useradd -b /home/faculty/ -s /bin/bash -m admin<br />passwd admin</span></span></pre>Let's use the password<br /><pre style="background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;"><span style="color: #333333;"><span style="font-size: 14px;">Password!</span></span></pre>since this is a local machine, and I'm assuming that the folks on the LAN are friendly.<br /><br />Next, make sure the new user owns their home directory.<br /><pre style="background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;"><span style="color: #333333;"><span style="font-size: 14px;">chown -R admin: admin</span></span></pre>And then create the shared directory inside /home/admin,<br /><pre style="background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;"><span style="color: #333333;"><span style="font-size: 14px;">mkdir /home/admin/storage</span></span></pre>and make sure that everyone can read/write to that spot.<br /><pre style="background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;"><span style="color: #333333;"><span style="font-size: 14px;">chmod -R 777 /home/admin/storage</span></span></pre>I think nfs can be activated by adding the following to rc.conf.local. (<a href="https://www.safaribooksonline.com/library/view/absolute-openbsd-2nd/9781457172496/the_openbsd_nfs_server.html" target="_blank">src</a>; might not be updated, and I can't see more than the first bit)<br /><pre style="background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;"><span style="color: #333333;"><span style="font-size: 14px;">vi /etc/rc.conf.local</span></span></pre>add to the end of the file:<br /><pre style="background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;"><span style="color: #333333;"><span style="font-size: 14px;">portmap=YES<br />nfs_server=YES</span></span></pre>OR, I can run these two commands. &nbsp;There's this thing about multiple server instances, so that I can handle concurrent requests, that I can control with the following commands...I just don't know if the services will be enabled after a reboot.<br /><pre style="background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;"><span style="color: #333333;"><span style="font-size: 14px;">rcctl enable portmap mountd nfsd<br />rcctl set nfsd flags -tun 4</span></span></pre>Once the services are started, the /etc/exports file needs an entry. &nbsp;This is how the machine knows to share the folder - and who to share it to.<br /><pre style="background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;"><span style="color: #333333;"><span style="font-size: 14px;">vi /etc/exports</span></span></pre>add to the bottom (this gives everyone accessing the folder root access),<br /><pre style="background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;"><span style="color: #333333;"><span style="font-size: 14px;">/home/admin/storage -alldirs -mapall=root</span></span></pre>Now the nfs service can be started<br /><pre style="background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;"><span style="color: #333333;"><span style="font-size: 14px;">rcctl start portmap mountd nfsd</span></span></pre>and in case you edited the /etc/exports file while the NFS was running, restart the service.<br /><pre style="background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;"><span style="color: #333333;"><span style="font-size: 14px;">rcctl reload mountd</span></span></pre><h4>Mount</h4><div>to mount the new network folder, you have to create your own location for the folder to present itself, and then set the folder to automount.</div><div><br /></div><div>Also, don't forget to install the nfs software. &nbsp;It came default on OpenBSD, but not so much on Linux Mint.</div><div><pre style="background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;"><span style="color: #333333;"><span style="font-size: 14px;">sudo apt-get install nfs-server -y</span></span></pre></div><div>create /storage in the root directory</div><div><pre style="background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;"><span style="color: #333333;"><span style="font-size: 14px;">sudo mkdir /storage</span></span></pre></div><div>give everyone all permissions</div><div><pre style="background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;"><span style="color: #333333;"><span style="font-size: 14px;">chmod 777 /storage</span></span></pre></div><div>edit the fstab to automount the folder - we'll assume the hostname of the OpenBSD server is 'server1'</div><div><pre style="background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;"><span style="color: #333333;"><span style="font-size: 14px;">sudo nano /etc/fstab</span></span></pre></div><div>and add this to the bottom of the file</div><pre style="background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;"><span style="color: #333333;"><span style="font-size: 14px;">server1:/home/admin/storage     /storage  nfs </span></span></pre>and remount everything<br /><pre style="background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;"><span style="color: #333333;"><span style="font-size: 14px;">sudo mount -a</span></span></pre>that's it! &nbsp;You should have full access to the network folder.
    </article>

    <p class="extra-space"></p>
    <hr>
    <p class="extra-space"></p>

</div>





      </section>
      <footer>
        <p><small>Hosted on GitHub &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a> and <a href="https://github.com/umhau">umhau</a></small></p>
      </footer>
    </box>
    <script src="/assets/js/scale.fix.js"></script>


  



  </body>
</html>
