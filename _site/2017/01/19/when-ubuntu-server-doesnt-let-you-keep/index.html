<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?">


    <link rel="stylesheet" type="text/css" href="/assets/css/styles.css">
    <meta name="viewport" content="width=device-width">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="/js/infinite-jekyll.js"></script>

  </head>
  <body>
    <box class="wrapper">
      <header>
        <a href="http://localhost:4000"> <h1>*nixing around</h1> </a>
        <p>A programmer's journal of complicated projects.</p>
        <p class="view"><a href="">github</a> | <a href="http://localhost:4000/about">about</a> | <a href="http://localhost:4000/explore">explore</a></p>

        <p>testing</p>

      </header>
      <section>

      <div class="post">

    <header class="post-header">
        
    <h1 class="post-title">When Ubuntu Server doesn't let you keep the internet device drivers</h1>
    <p 
        class="post-meta">Jan 19, 2017 • <a  href="/2017/01/19/when-ubuntu-server-doesnt-let-you-keep/">permalink</a>
        <i>  • Linux • Ubuntu Server 16.04.1 LTS • tasksel • internet drivers</i> 
    </p>
    </header>

    <article class="post-content">
    So I ran into a problem while setting up Ubuntu Server 16.04.1 LTS for my cluster: one of my computers had restricted hardware drivers for the wifi and ethernet devices, and while the drivers were available on the install media, they weren't transferred over. &nbsp;Something about non-free stuff. &nbsp;So after installation, I was stuck with a computer that had no access to the web. <br /><br />After a ton of searching, I a) found what the hardware problem was, and b) realized that I can use the install media as the installation source - that might sound obvious, but the keyword there is <i>"can",</i>&nbsp;not <i>"should be able to"</i>.&nbsp;It's badly documented and very not-obvious. <br /><br />Anyway, here's the <a href="https://help.ubuntu.com/12.04/serverguide/installing-from-cd.html#install-tasks" target="_blank">source</a>&nbsp;for using the install media. &nbsp;Part of the install process is choosing which sets of packages you want to include - things like OpenSSH Server stuff or Mail Server stuff. &nbsp;There's also one called Manual Package Selection. &nbsp;It didn't seem to do anything during the install (though I did walk away, and it might have timed out), but you can reenter the tool after the installation is finished and you've rebooted into the new OS. <br /><br />After rebooting, log in and plug the ubuntu server install media into the computer. &nbsp;Run:<br /><pre style="background-color: #eff0f1; border: 0px; color: #333333; font-size: 14px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;">sudo tasksel install manual</pre>This command will find the install media, and 'install' the manual package selection 'package'. &nbsp;In other cases, it would actually install stuff - in this case, it just gives you a shell prompt. &nbsp;At this prompt, you somehow have full internet access - I don't know how it happened. &nbsp;It was automagical. &nbsp;In my case, the next step was editing the sources list to enable the universe repository (already seemed enabled - automagic of the tasksel command?). &nbsp;<a href="https://unixblogger.com/2016/08/11/how-to-get-your-realtek-rtl8111rtl8168-working-updated-guide/" target="_blank">Source</a> on the actual internet driver fix.<br /><pre style="background-color: #eff0f1; border: 0px; color: #333333; font-size: 14px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;">sudo nano /etc/apt/sources.list</pre>And a line that looks like this<br /><pre style="background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;"><span style="color: #333333;"><span style="font-size: 14px;">deb http://us.archive.ubuntu.com/ubuntu/ xenial main restricted</span></span><span style="color: #333333; font-size: 14px;"><br /></span></pre><div style="text-align: justify;">Should be changed to look like this:</div><div><pre style="background-color: #eff0f1; border: 0px; margin-bottom: 1em; overflow: auto; padding: 5px; text-align: justify; width: auto; word-wrap: normal;"><span style="color: #333333;"><span style="font-size: 14px;">deb http://us.archive.ubuntu.com/ubuntu/ xenial main restricted universe</span></span><span style="color: #333333; font-size: 14px;"><br /></span></pre></div><div style="text-align: justify;">[ctrl]-x to leave. &nbsp;Then, run&nbsp;</div><div style="text-align: justify;"><pre style="background-color: #eff0f1; border: 0px; color: #333333; font-size: 14px; margin-bottom: 1em; overflow: auto; padding: 5px; width: auto; word-wrap: normal;">sudo apt-get install r8168-dkms</pre></div><div style="text-align: justify;">And the driver is installed. &nbsp;Reboot and the internet should work.</div><br />
    </article>

    <p class="extra-space"></p>
    <hr>
    <p class="extra-space"></p>

</div>





      </section>
      <footer>
        <p><small>Hosted on GitHub &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a> and <a href="https://github.com/umhau">umhau</a></small></p>
      </footer>
    </box>
    <script src="/assets/js/scale.fix.js"></script>


  



  </body>
</html>
